# Exemple d'utilisation du workflow de dÃ©ploiement HOMOL avec version
# Ce workflow dÃ©ploie sur le serveur HOMOL et synchronise develop â†’ homol aprÃ¨s merge

name: ðŸš€ DÃ©ploiement HOMOL

on:
  pull_request:
    branches: [ homol ]
    types: [ closed ]

permissions:
  contents: write  # nÃ©cessaire pour le miroir git

concurrency:
  group: homol-deploy-${{ github.event.pull_request.head.ref }}
  cancel-in-progress: true

jobs:
  deploy-homol:
    name: ðŸš€ DÃ©ploiement HOMOL
    uses: LeZouzouEnWeb/workflows/.github/workflows/homol-deploy.yml@V1.0.4
    permissions:
      contents: write
    secrets:
      REMOTE_CHEMIN: ${{ secrets.REMOTE_CHEMIN }}
      SFTP_HOST: ${{ secrets.SFTP_HOST }}
      SFTP_USER: ${{ secrets.SFTP_USER }}
      SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
    with:
      ADRESSE_GLOBAL: ${{ vars.ADRESSE_GLOBAL }}
      ADRESSE_LOCAL: ${{ vars.ADRESSE_LOCAL }}
      remote_env: homol
      PATH_ORDER: local-env
